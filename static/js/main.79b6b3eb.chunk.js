(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{111:function(t,e,n){},132:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(31),u=n.n(a),o=(n(76),n(10)),i=n.n(o),s=n(22),l=(n(78),n(53)),d=n(40),f=(n(80),n(15)),j=n(14),b=n(21),g=n(135),h=n(134),O=n(9),p=n(26),v=n(28),x=n.n(v),m=n(133),k=n(48),U=n.n(k),C=n.p+"static/media/programmer.5b8b1590.svg",L=n(1);function y(){var t=Object(j.c)(f.c.getUser),e=Object(j.b)();return Object(L.jsxs)("div",{className:U.a.UserMenuBlock,children:[Object(L.jsxs)("div",{className:U.a.UserName,children:[Object(L.jsx)("img",{src:C,alt:"userImage"}),Object(L.jsx)("span",{children:t.name})]}),Object(L.jsx)("div",{children:Object(L.jsx)(m.a,{onClick:function(t){e(f.a.logoutUser())},children:"Logout"})})]})}function I(){var t=Object(O.h)(),e=Object(r.useState)(!1),n=Object(b.a)(e,2),c=(n[0],n[1],Object(j.c)(f.c.getIsLoggedIn));return Object(L.jsx)(g.a.Header,{children:Object(L.jsxs)(h.a,{variant:"tabs",activeKey:t.pathname,children:[Object(L.jsx)(h.a.Item,{children:Object(L.jsx)(p.c,{exact:!0,to:"/",className:x.a.Link,activeClassName:x.a.CurrentLink,children:Object(L.jsx)(h.a.Link,{as:"div",href:"/",children:"Home"})})}),c&&Object(L.jsx)(h.a.Item,{children:Object(L.jsx)(p.c,{to:"/contacts",className:x.a.Link,activeClassName:x.a.CurrentLink,children:Object(L.jsx)(h.a.Link,{as:"div",href:"/contacts",children:"Contacts"})})}),Object(L.jsx)("div",{className:x.a.UserBlock,children:c?Object(L.jsx)(y,{}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(h.a.Item,{children:Object(L.jsx)(p.c,{to:"/registration",className:x.a.Link,activeClassName:x.a.CurrentLink,children:Object(L.jsx)(h.a.Link,{as:"div",href:"/registration",children:"Registration"})})}),Object(L.jsx)(h.a.Item,{children:Object(L.jsx)(p.c,{to:"/login",className:x.a.Link,activeClassName:x.a.CurrentLink,children:Object(L.jsx)(h.a.Link,{as:"div",href:"/login",children:"Login"})})})]})})]})})}var w=n(3),_=n(11),N=["children","redirectTo","restricted"],T=function(t){var e=t.children,n=t.redirectTo,r=t.restricted,c=Object(_.a)(t,N),a=Object(j.c)(f.c.getIsLoggedIn)&&r;return Object(L.jsx)(O.b,Object(w.a)(Object(w.a)({},c),{},{children:a?Object(L.jsx)(O.a,{to:n}):e}))};T.defaultProps={redirectTo:"/",restricted:!1};var B=["children","redirectTo"],A=function(t){var e=t.children,n=t.redirectTo,r=Object(_.a)(t,B),c=Object(j.c)(f.c.getIsLoggedIn);return Object(L.jsx)(O.b,Object(w.a)(Object(w.a)({},r),{},{children:c?e:Object(L.jsx)(O.a,{to:n})}))};A.defaultProps={redirectTo:"/"};var F=n(64),W=c.a.lazy((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,147))})),z=c.a.lazy((function(){return Promise.all([n.e(0),n.e(7),n.e(4)]).then(n.bind(null,150))})),P=c.a.lazy((function(){return n.e(6).then(n.bind(null,152))})),V=c.a.lazy((function(){return n.e(5).then(n.bind(null,153))})),E=c.a.lazy((function(){return n.e(8).then(n.bind(null,148))}));function H(){var t=Object(O.g)(),e=Object(O.h)(),n=Object(j.b)(),c=Object(r.useRef)(Object(j.c)(f.c.getToken)),a=Object(j.c)(f.c.getAuthError);Object(r.useEffect)((function(){c&&Object(s.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(f.a.getInfoUser(c.current));case 3:if("auth/getInfo/rejected"!==(e=t.sent).type){t.next=6;break}throw new Error("my error");case 6:return t.abrupt("return",e);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",d.b.error(a));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}),[n,c]);var u=e.state&&e.state.background;return Object(L.jsxs)("div",{children:[Object(L.jsxs)(r.Suspense,{fallback:Object(L.jsx)(F.a,{}),children:[Object(L.jsx)(I,{}),Object(L.jsx)(l.a,{children:Object(L.jsx)("h1",{id:"title",children:"Phonebook"})}),Object(L.jsxs)(O.d,{location:u||e,children:[Object(L.jsx)(T,{path:"/",exact:!0,children:Object(L.jsx)(E,{})}),Object(L.jsx)(T,{path:"/registration",redirectTo:"/contacts",restricted:!0,children:Object(L.jsx)(P,{})}),Object(L.jsx)(T,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(L.jsx)(V,{})}),Object(L.jsx)(A,{path:"/contacts",redirectTo:"/login",children:Object(L.jsx)(z,{})}),Object(L.jsx)(O.a,{strict:!0,from:"/:safds",to:"/"})]}),Object(L.jsx)(T,{path:"/privacy_policy",children:Object(L.jsx)(W,{show:!0,onHide:function(){return t.goBack()}})})]}),Object(L.jsx)(d.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(L.jsx)(d.a,{})]})}var M=n(70),S=n(4),R=n(23),J=n(37),K=n(50),Z=Object(S.a)({reducer:{auth:f.b,contacts:K.c},middleware:function(t){return Object(J.a)(t({serializableCheck:{ignoredActions:[R.a,R.f,R.b,R.c,R.d,R.e]}}))},devTools:!1}),q={store:Z,persistor:Object(R.h)(Z)};n(131);u.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(j.a,{store:q.store,children:Object(L.jsx)(M.a,{loading:null,persistor:q.persistor,children:Object(L.jsx)(p.a,{children:Object(L.jsx)(H,{})})})})}),document.getElementById("root"))},15:function(t,e,n){"use strict";n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return h}));var r={};n.r(r),n.d(r,"getToken",(function(){return L})),n.d(r,"getUser",(function(){return y})),n.d(r,"getIsLoggedIn",(function(){return I})),n.d(r,"getAuthError",(function(){return w})),n.d(r,"getAuthLoading",(function(){return _}));var c,a,u,o,i,s=n(23),l=n(65),d=n.n(l),f=n(2),j=n(4),b=n(8),g=n(12),h=n(5),O=Object(j.d)(b.a.auth.token,(c={},Object(f.a)(c,h.signupUser.fulfilled,(function(t,e){return e.payload.token})),Object(f.a)(c,h.loginUser.fulfilled,(function(t,e){return e.payload.token})),Object(f.a)(c,h.logoutUser.fulfilled,(function(){return b.a.auth.token})),c)),p=Object(j.d)(b.a.auth.user,(a={},Object(f.a)(a,h.signupUser.fulfilled,(function(t,e){return e.payload.user})),Object(f.a)(a,h.loginUser.fulfilled,(function(t,e){return e.payload.user})),Object(f.a)(a,h.getInfoUser.fulfilled,(function(t,e){return e.payload})),Object(f.a)(a,h.logoutUser.fulfilled,(function(){return b.a.auth.user})),a)),v=Object(j.d)(b.a.auth.isLoggedIn,(u={},Object(f.a)(u,h.signupUser.pending,(function(){return b.a.auth.isLoggedIn})),Object(f.a)(u,h.loginUser.pending,(function(){return b.a.auth.isLoggedIn})),Object(f.a)(u,h.logoutUser.pending,(function(){return b.a.auth.isLoggedIn})),Object(f.a)(u,h.signupUser.fulfilled,(function(){return!0})),Object(f.a)(u,h.loginUser.fulfilled,(function(){return!0})),Object(f.a)(u,h.getInfoUser.fulfilled,(function(){return!0})),Object(f.a)(u,h.logoutUser.fulfilled,(function(){return b.a.auth.isLoggedIn})),u)),x=Object(j.d)(b.a.auth.error,(o={},Object(f.a)(o,h.signupUser.pending,(function(){return b.a.auth.error})),Object(f.a)(o,h.loginUser.pending,(function(){return b.a.auth.error})),Object(f.a)(o,h.logoutUser.pending,(function(){return b.a.auth.error})),Object(f.a)(o,h.getInfoUser.pending,(function(){return b.a.auth.error})),Object(f.a)(o,h.signupUser.rejected,(function(t,e){return e.payload})),Object(f.a)(o,h.loginUser.rejected,(function(t,e){return e.payload})),Object(f.a)(o,h.logoutUser.rejected,(function(t,e){return e.payload})),Object(f.a)(o,h.getInfoUser.rejected,(function(t,e){var n=e.payload;return 401===n.response.status?"Please login or register":n.message})),o)),m=Object(j.d)(b.a.auth.loading,(i={},Object(f.a)(i,h.getInfoUser.pending,(function(){return!0})),Object(f.a)(i,h.getInfoUser.fulfilled,(function(){return!1})),Object(f.a)(i,h.getInfoUser.rejected,(function(){return!1})),i)),k=Object(g.b)({token:O,user:p,isLoggedIn:v,error:x,loading:m}),U={key:"auth",storage:d.a,whitelist:["token"]},C=Object(s.g)(U,k),L=(n(30),function(t){return t.auth.token}),y=function(t){return t.auth.user},I=function(t){return t.auth.isLoggedIn},w=function(t){return t.auth.error},_=function(t){return t.auth.loading}},28:function(t,e,n){t.exports={Links:"Navigation_Links__9BWIh",Link:"Navigation_Link__3cEh_ Navigation_Links__9BWIh",CurrentLink:"Navigation_CurrentLink__H27_3",UserBlock:"Navigation_UserBlock__2tjnZ"}},29:function(t,e,n){"use strict";var r=n(24),c=n.n(r);c.a.defaults.baseURL="https://connections-api.herokuapp.com";var a={set:function(t){c.a.defaults.headers.common.Authorization="Bearer ".concat(t)},unset:function(){c.a.defaults.headers.common.Authorization=""}};e.a={getContacts:function(){return c.a.get("/contacts")},setContacts:function(t){return c.a.post("/contacts",t)},deleteContact:function(t){return c.a.delete("/contacts/".concat(t))},signup:function(t){return c.a.post("/users/signup",t).then((function(t){var e=t.data;return a.set(e.token),e}))},login:function(t){return c.a.post("/users/login",t).then((function(t){var e=t.data;return a.set(e.token),e}))},getUserInfo:function(t){return a.set(t),c.a.get("/users/current")},logout:function(){return c.a.post("/users/logout").then((function(t){return a.unset(),t}))},token:a}},30:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return o}));var r=n(4),c=Object(r.b)("auth/signup"),a=Object(r.b)("auth/login"),u=Object(r.b)("auth/getInfo"),o=Object(r.b)("auth/logout")},41:function(t,e,n){t.exports={Container:"Container_Container__25I5P",FormContainer:"Container_FormContainer__3b89H"}},48:function(t,e,n){t.exports={UserMenuBlock:"UserMenu_UserMenuBlock__1Sv-_",UserName:"UserMenu_UserName__2wn2v"}},5:function(t,e,n){"use strict";n.r(e),n.d(e,"signupUser",(function(){return s})),n.d(e,"loginUser",(function(){return l})),n.d(e,"getInfoUser",(function(){return d})),n.d(e,"logoutUser",(function(){return f}));var r=n(10),c=n.n(r),a=n(22),u=n(4),o=n(29),i=n(30),s=Object(u.c)([i.d],function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,o.a.signup(e);case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),l=Object(u.c)([i.b],function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,o.a.login(e);case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),d=Object(u.c)([i.a],function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,o.a.getUserInfo(e);case 4:return a=t.sent,t.abrupt("return",a.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(u.c)([i.c],function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,o.a.logout();case 4:return a=t.sent,u=a.data,t.abrupt("return",u);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}())},50:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return z})),n.d(e,"a",(function(){return a}));var r={};n.r(r),n.d(r,"addContactAction",(function(){return o})),n.d(r,"filterAction",(function(){return i})),n.d(r,"deleteActions",(function(){return s})),n.d(r,"existContactsAction",(function(){return l}));var c={};n.r(c),n.d(c,"getContacts",(function(){return g})),n.d(c,"getFilter",(function(){return h})),n.d(c,"isLoading",(function(){return O})),n.d(c,"error",(function(){return p})),n.d(c,"getContactsWithFilter",(function(){return v}));var a={};n.r(a),n.d(a,"fetchContacts",(function(){return w})),n.d(a,"addNewContact",(function(){return _})),n.d(a,"deleteContact",(function(){return N}));var u=n(4),o=Object(u.b)("contacts/addContact"),i=Object(u.b)("contacts/filter"),s=Object(u.b)("contacts/deleteContact"),l=Object(u.b)("contact/existContact"),d=n(33);var f,j,b,g=function(t){return t.contacts.items},h=function(t){return t.contacts.filter},O=function(t){return t.contacts.loading},p=function(t){return t.contacts.error},v=Object(d.a)([g,h],(function(t,e){return function(t,e){return""===e?t:t.filter((function(t){var n=t.name;return function(t,e){var n=e.slice(0,t.length);return t.toLowerCase()===n.toLowerCase()}(e,n)}))}(t,e)})),x=n(2),m=n(37),k=n(12),U=n(8),C=n(10),L=n.n(C),y=n(22),I=n(29),w=Object(u.c)([l],function(){var t=Object(y.a)(L.a.mark((function t(e,n){var r,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,I.a.getContacts();case 4:return c=t.sent,t.abrupt("return",c.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r("".concat(t.t0.message)));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),_=Object(u.c)([o],function(){var t=Object(y.a)(L.a.mark((function t(e,n){var r,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,I.a.setContacts(e);case 4:return c=t.sent,t.abrupt("return",c.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r("".concat(t.t0.message,"-- we can not add this contact please reload this page and try again")));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),N=Object(u.c)([s],function(){var t=Object(y.a)(L.a.mark((function t(e,n){var r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,I.a.deleteContact(e);case 4:if(200!==t.sent.status){t.next=7;break}return t.abrupt("return",e);case 7:t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r("".concat(t.t0.message,"-- we can not delete this contact please reload this page and try again")));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),T=n(5),B=Object(u.d)(U.a.contacts.items,(f={},Object(x.a)(f,w.fulfilled,(function(t,e){var n=e.payload;return Object(m.a)(n)})),Object(x.a)(f,_.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(m.a)(t),[n])})),Object(x.a)(f,N.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(x.a)(f,T.logoutUser.fulfilled,(function(){return U.a.contacts.items})),f)),A=Object(u.d)(U.a.contacts.loading,(j={},Object(x.a)(j,w.pending,(function(){return!0})),Object(x.a)(j,w.fulfilled,(function(){return!1})),Object(x.a)(j,w.rejected,(function(){return!1})),j)),F=Object(u.d)(U.a.contacts.error,(b={},Object(x.a)(b,w.pending,(function(){return null})),Object(x.a)(b,_.pending,(function(){return null})),Object(x.a)(b,N.pending,(function(){return null})),Object(x.a)(b,w.rejected,(function(t,e){return e.payload})),Object(x.a)(b,N.rejected,(function(t,e){return e.payload})),Object(x.a)(b,_.rejected,(function(t,e){return e.payload})),b)),W=Object(u.d)(U.a.contacts.filter,Object(x.a)({},i,(function(t,e){return e.payload}))),z=Object(k.b)({items:B,filter:W,error:F,loading:A})},53:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return o}));n(0);var r=n(41),c=n.n(r),a=n(1),u=function(t){var e=t.children;return Object(a.jsx)("div",{className:c.a.Container,children:e})},o=function(t){var e=t.children;return Object(a.jsx)("div",{className:c.a.FormContainer,children:e})}},64:function(t,e,n){"use strict";n(0),n(111),n(112);var r=n(69),c=n.n(r),a=n(1);e.a=function(){return Object(a.jsx)(c.a,{type:"TailSpin",color:"#00BFFF",height:100,width:100,className:"Loading"})}},76:function(t,e,n){},78:function(t,e,n){},8:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={auth:{user:{name:null,email:null},token:null,isLoggedIn:!1,error:null,loading:!1},contacts:{items:[],filter:"",error:null,loading:!1}}}},[[132,2,3]]]);
//# sourceMappingURL=main.79b6b3eb.chunk.js.map